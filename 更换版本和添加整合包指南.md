# MinecraftæœåŠ¡å™¨ç‰ˆæœ¬æ›´æ¢å’Œæ•´åˆåŒ…å®‰è£…æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—è¯´æ˜å¦‚ä½•ï¼š
1. æ›´æ¢MinecraftæœåŠ¡å™¨ç‰ˆæœ¬
2. æ·»åŠ æ•´åˆåŒ…ï¼ˆForge/Fabric/Quiltç­‰ï¼‰
3. éœ€è¦ä¿®æ”¹çš„é…ç½®å’Œæ–‡ä»¶

---

## ğŸ“‹ éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æ€»è§ˆ

### æ ¸å¿ƒæ–‡ä»¶
- âœ… `/opt/minecraft/server.jar` - æœåŠ¡å™¨æ ¸å¿ƒæ–‡ä»¶
- âœ… `/etc/systemd/system/mc-server.service` - systemdæœåŠ¡é…ç½®
- âœ… `/opt/minecraft/server.properties` - æœåŠ¡å™¨é…ç½®ï¼ˆé€šå¸¸ä¸éœ€è¦ä¿®æ”¹ï¼‰

### å¯é€‰æ–‡ä»¶
- `/opt/minecraft/start.sh` - å¯åŠ¨è„šæœ¬ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- `/opt/minecraft/mods/` - æ¨¡ç»„ç›®å½•ï¼ˆæ•´åˆåŒ…éœ€è¦ï¼‰
- `/opt/minecraft/config/` - é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆæ•´åˆåŒ…éœ€è¦ï¼‰

---

## ğŸ”„ æ–¹æ¡ˆä¸€ï¼šæ›´æ¢æœåŠ¡å™¨ç‰ˆæœ¬ï¼ˆåŸç‰ˆï¼‰

### æ­¥éª¤1ï¼šå¤‡ä»½å½“å‰æœåŠ¡å™¨

```bash
# åœæ­¢æœåŠ¡å™¨
sudo systemctl stop mc-server

# å¤‡ä»½æ•´ä¸ªæœåŠ¡å™¨ç›®å½•
sudo tar -czf /opt/minecraft-backup-$(date +%Y%m%d).tar.gz /opt/minecraft

# æˆ–è€…åªå¤‡ä»½ä¸–ç•Œæ–‡ä»¶
sudo tar -czf /opt/world-backup-$(date +%Y%m%d).tar.gz /opt/minecraft/world
```

### æ­¥éª¤2ï¼šä¸‹è½½æ–°ç‰ˆæœ¬server.jar

```bash
cd /opt/minecraft

# å¤‡ä»½æ—§ç‰ˆæœ¬
sudo -u minecraft mv server.jar server.jar.old

# ä¸‹è½½æ–°ç‰ˆæœ¬ï¼ˆä»¥1.21ä¸ºä¾‹ï¼‰
# æ–¹æ³•1ï¼šä»Mojangå®˜æ–¹ä¸‹è½½
sudo -u minecraft wget -O server.jar https://piston-data.mojang.com/v1/objects/[æ–°ç‰ˆæœ¬çš„hash]/server.jar

# æ–¹æ³•2ï¼šä½¿ç”¨ç‰ˆæœ¬æ¸…å•è‡ªåŠ¨è·å–
# éœ€è¦å…ˆè·å–ç‰ˆæœ¬ä¿¡æ¯ï¼Œç„¶åä¸‹è½½å¯¹åº”çš„server.jar
```

### æ­¥éª¤3ï¼šæ£€æŸ¥systemdæœåŠ¡é…ç½®

é€šå¸¸ä¸éœ€è¦ä¿®æ”¹ï¼Œä½†å¦‚æœæ–°ç‰ˆæœ¬éœ€è¦ä¸åŒçš„JVMå‚æ•°ï¼š

```bash
# ç¼–è¾‘æœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/mc-server.service

# æ£€æŸ¥ExecStartè¡Œï¼Œé€šå¸¸ä¸éœ€è¦ä¿®æ”¹
# é™¤éæ–°ç‰ˆæœ¬éœ€è¦ä¸åŒçš„å†…å­˜é…ç½®æˆ–JVMå‚æ•°
```

### æ­¥éª¤4ï¼šé¦–æ¬¡è¿è¡Œæ–°ç‰ˆæœ¬

```bash
# é¦–æ¬¡è¿è¡Œç”Ÿæˆæ–°ç‰ˆæœ¬çš„é…ç½®æ–‡ä»¶
cd /opt/minecraft
sudo -u minecraft java -Xmx1024M -Xms1024M -jar server.jar nogui

# ç­‰å¾…å‡ ç§’åæŒ‰ Ctrl+C åœæ­¢
```

### æ­¥éª¤5ï¼šæ¥å—EULAï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
sudo sed -i 's/eula=false/eula=true/' /opt/minecraft/eula.txt
```

### æ­¥éª¤6ï¼šå¯åŠ¨æœåŠ¡å™¨

```bash
sudo systemctl start mc-server
sudo systemctl status mc-server
```

---

## ğŸ® æ–¹æ¡ˆäºŒï¼šæ·»åŠ Forgeæ•´åˆåŒ…

### å‰ç½®å‡†å¤‡

1. **ç¡®å®šForgeç‰ˆæœ¬**
   - è®¿é—® https://files.minecraftforge.net/
   - é€‰æ‹©Minecraftç‰ˆæœ¬
   - é€‰æ‹©å¯¹åº”çš„Forgeç‰ˆæœ¬

2. **ä¸‹è½½Forgeå®‰è£…å™¨**
   ```bash
   cd /tmp
   wget https://maven.minecraftforge.net/net/minecraftforge/forge/[ç‰ˆæœ¬]/forge-[ç‰ˆæœ¬]-installer.jar
   ```

### æ­¥éª¤1ï¼šå¤‡ä»½å½“å‰æœåŠ¡å™¨

```bash
sudo systemctl stop mc-server
sudo tar -czf /opt/minecraft-backup-$(date +%Y%m%d).tar.gz /opt/minecraft
```

### æ­¥éª¤2ï¼šå®‰è£…ForgeæœåŠ¡å™¨

```bash
cd /opt/minecraft

# ä¸‹è½½Forgeå®‰è£…å™¨ï¼ˆç¤ºä¾‹ï¼š1.20.1-47.1.0ï¼‰
sudo -u minecraft wget -O forge-installer.jar https://maven.minecraftforge.net/net/minecraftforge/forge/1.20.1-47.1.0/forge-1.20.1-47.1.0-installer.jar

# è¿è¡Œå®‰è£…å™¨ï¼ˆå®‰è£…æœåŠ¡å™¨ï¼‰
sudo -u minecraft java -jar forge-installer.jar --installServer

# å®‰è£…å®Œæˆåä¼šç”Ÿæˆ forge-[ç‰ˆæœ¬].jar
# ä¾‹å¦‚ï¼šforge-1.20.1-47.1.0.jar
```

### æ­¥éª¤3ï¼šä¿®æ”¹systemdæœåŠ¡é…ç½®

```bash
sudo nano /etc/systemd/system/mc-server.service
```

ä¿®æ”¹ExecStartè¡Œï¼š

**åŸç‰ˆé…ç½®ï¼š**
```
ExecStart=/usr/bin/java -Xmx1024M -Xms1024M ... -jar /opt/minecraft/server.jar nogui
```

**Forgeé…ç½®ï¼š**
```
ExecStart=/usr/bin/java -Xmx1536M -Xms1536M ... -jar /opt/minecraft/forge-1.20.1-47.1.0.jar nogui
```

**æ³¨æ„**ï¼š
- ä¿®æ”¹jaræ–‡ä»¶åï¼š`server.jar` â†’ `forge-[ç‰ˆæœ¬].jar`
- å¯èƒ½éœ€è¦å¢åŠ å†…å­˜ï¼ˆForgeéœ€è¦æ›´å¤šå†…å­˜ï¼‰
- 2GBæœåŠ¡å™¨å»ºè®®ï¼š`-Xmx1536M` æˆ– `-Xmx1024M`ï¼ˆå¦‚æœå†…å­˜ç´§å¼ ï¼‰

### æ­¥éª¤4ï¼šåˆ›å»ºmodsç›®å½•

```bash
sudo -u minecraft mkdir -p /opt/minecraft/mods
sudo -u minecraft mkdir -p /opt/minecraft/config
```

### æ­¥éª¤5ï¼šå®‰è£…æ¨¡ç»„/æ•´åˆåŒ…

```bash
# å°†æ¨¡ç»„æ–‡ä»¶å¤åˆ¶åˆ°modsç›®å½•
# æ–¹æ³•1ï¼šæ‰‹åŠ¨ä¸Šä¼ 
# ä½¿ç”¨scpæˆ–sftpå°†æ¨¡ç»„æ–‡ä»¶ä¸Šä¼ åˆ° /opt/minecraft/mods/

# æ–¹æ³•2ï¼šä¸‹è½½æ•´åˆåŒ…
cd /opt/minecraft/mods
# ä¸‹è½½æ•´åˆåŒ…çš„æ¨¡ç»„æ–‡ä»¶
```

### æ­¥éª¤6ï¼šé¦–æ¬¡è¿è¡Œ

```bash
cd /opt/minecraft
sudo -u minecraft java -Xmx1536M -Xms1536M -jar forge-1.20.1-47.1.0.jar nogui

# ç­‰å¾…å¯åŠ¨ï¼Œé¦–æ¬¡å¯åŠ¨ä¼šç”Ÿæˆé…ç½®æ–‡ä»¶
# æŒ‰ Ctrl+C åœæ­¢
```

### æ­¥éª¤7ï¼šæ¥å—EULA

```bash
sudo sed -i 's/eula=false/eula=true/' /opt/minecraft/eula.txt
```

### æ­¥éª¤8ï¼šé‡æ–°åŠ è½½å¹¶å¯åŠ¨

```bash
sudo systemctl daemon-reload
sudo systemctl start mc-server
sudo systemctl status mc-server
```

---

## ğŸ§µ æ–¹æ¡ˆä¸‰ï¼šæ·»åŠ Fabricæ•´åˆåŒ…

### å‰ç½®å‡†å¤‡

1. **ä¸‹è½½Fabric Loader**
   - è®¿é—® https://fabricmc.net/
   - é€‰æ‹©Minecraftç‰ˆæœ¬å’ŒFabricç‰ˆæœ¬

2. **ä¸‹è½½Fabric API**
   - è®¿é—® https://modrinth.com/mod/fabric-api

### æ­¥éª¤1ï¼šå¤‡ä»½å½“å‰æœåŠ¡å™¨

```bash
sudo systemctl stop mc-server
sudo tar -czf /opt/minecraft-backup-$(date +%Y%m%d).tar.gz /opt/minecraft
```

### æ­¥éª¤2ï¼šå®‰è£…FabricæœåŠ¡å™¨

```bash
cd /opt/minecraft

# ä¸‹è½½Fabricå®‰è£…å™¨
sudo -u minecraft wget -O fabric-installer.jar https://maven.fabricmc.net/net/fabricmc/fabric-installer/0.11.2/fabric-installer-0.11.2.jar

# å®‰è£…FabricæœåŠ¡å™¨ï¼ˆç¤ºä¾‹ï¼š1.20.1ï¼‰
sudo -u minecraft java -jar fabric-installer.jar server -mcversion 1.20.1 -loader 0.14.22

# ä¼šç”Ÿæˆ fabric-server-launch.jar
```

### æ­¥éª¤3ï¼šåˆ›å»ºå¯åŠ¨è„šæœ¬

Fabricéœ€è¦ç‰¹æ®Šçš„å¯åŠ¨æ–¹å¼ï¼Œåˆ›å»ºå¯åŠ¨è„šæœ¬ï¼š

```bash
sudo -u minecraft nano /opt/minecraft/start-fabric.sh
```

å†…å®¹ï¼š
```bash
#!/bin/bash
cd /opt/minecraft
java -Xmx1536M -Xms1536M \
     -XX:+UseG1GC \
     -XX:MaxGCPauseMillis=200 \
     -jar fabric-server-launch.jar nogui
```

```bash
sudo chmod +x /opt/minecraft/start-fabric.sh
```

### æ­¥éª¤4ï¼šä¿®æ”¹systemdæœåŠ¡é…ç½®

```bash
sudo nano /etc/systemd/system/mc-server.service
```

ä¿®æ”¹ExecStartï¼š
```
ExecStart=/opt/minecraft/start-fabric.sh
```

æˆ–è€…ç›´æ¥ï¼š
```
ExecStart=/usr/bin/java -Xmx1536M -Xms1536M -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -jar /opt/minecraft/fabric-server-launch.jar nogui
```

### æ­¥éª¤5ï¼šåˆ›å»ºmodsç›®å½•

```bash
sudo -u minecraft mkdir -p /opt/minecraft/mods
sudo -u minecraft mkdir -p /opt/minecraft/config
```

### æ­¥éª¤6ï¼šå®‰è£…æ¨¡ç»„

```bash
# å°†Fabricæ¨¡ç»„å¤åˆ¶åˆ°modsç›®å½•
# åŒ…æ‹¬ï¼šfabric-api.jar å’Œå…¶ä»–æ¨¡ç»„
```

### æ­¥éª¤7ï¼šé¦–æ¬¡è¿è¡Œ

```bash
cd /opt/minecraft
sudo -u minecraft ./start-fabric.sh

# ç­‰å¾…å¯åŠ¨ï¼ŒæŒ‰ Ctrl+C åœæ­¢
```

### æ­¥éª¤8ï¼šæ¥å—EULAå¹¶å¯åŠ¨

```bash
sudo sed -i 's/eula=false/eula=true/' /opt/minecraft/eula.txt
sudo systemctl daemon-reload
sudo systemctl start mc-server
```

---

## ğŸ“ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### å¿…é¡»ä¿®æ”¹

1. **systemdæœåŠ¡æ–‡ä»¶**
   ```
   /etc/systemd/system/mc-server.service
   ```
   - ä¿®æ”¹jaræ–‡ä»¶å
   - å¯èƒ½éœ€è¦è°ƒæ•´å†…å­˜é…ç½®

2. **æœåŠ¡å™¨jaræ–‡ä»¶**
   ```
   /opt/minecraft/server.jar æˆ– forge-*.jar æˆ– fabric-server-launch.jar
   ```

### å¯èƒ½éœ€è¦ä¿®æ”¹

3. **å¯åŠ¨è„šæœ¬**ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
   ```
   /opt/minecraft/start.sh
   ```
   - ä¿®æ”¹jaræ–‡ä»¶å
   - è°ƒæ•´JVMå‚æ•°

4. **server.properties**ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰
   ```
   /opt/minecraft/server.properties
   ```
   - å¤§å¤šæ•°é…ç½®å…¼å®¹ï¼Œä½†å¯èƒ½éœ€è¦è°ƒæ•´æ€§èƒ½å‚æ•°

### æ–°å¢æ–‡ä»¶/ç›®å½•

5. **modsç›®å½•**ï¼ˆæ•´åˆåŒ…éœ€è¦ï¼‰
   ```
   /opt/minecraft/mods/
   ```

6. **configç›®å½•**ï¼ˆæ•´åˆåŒ…éœ€è¦ï¼‰
   ```
   /opt/minecraft/config/
   ```

---

## ğŸ”§ è¯¦ç»†ä¿®æ”¹ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåŸç‰ˆ1.20.4 â†’ 1.21

```bash
# 1. åœæ­¢æœåŠ¡å™¨
sudo systemctl stop mc-server

# 2. å¤‡ä»½
sudo tar -czf /opt/minecraft-backup.tar.gz /opt/minecraft

# 3. ä¸‹è½½æ–°ç‰ˆæœ¬
cd /opt/minecraft
sudo -u minecraft mv server.jar server.jar.old
sudo -u minecraft wget -O server.jar [1.21çš„ä¸‹è½½é“¾æ¥]

# 4. é¦–æ¬¡è¿è¡Œ
sudo -u minecraft java -Xmx1024M -Xms1024M -jar server.jar nogui
# Ctrl+Cåœæ­¢

# 5. æ¥å—EULA
sudo sed -i 's/eula=false/eula=true/' /opt/minecraft/eula.txt

# 6. å¯åŠ¨
sudo systemctl start mc-server
```

### ç¤ºä¾‹2ï¼šåŸç‰ˆ â†’ Forge 1.20.1

```bash
# 1. åœæ­¢æœåŠ¡å™¨
sudo systemctl stop mc-server

# 2. å¤‡ä»½
sudo tar -czf /opt/minecraft-backup.tar.gz /opt/minecraft

# 3. å®‰è£…Forge
cd /opt/minecraft
sudo -u minecraft wget -O forge-installer.jar [Forgeå®‰è£…å™¨é“¾æ¥]
sudo -u minecraft java -jar forge-installer.jar --installServer

# 4. ä¿®æ”¹systemdæœåŠ¡
sudo nano /etc/systemd/system/mc-server.service
# ä¿®æ”¹ï¼šserver.jar â†’ forge-1.20.1-47.1.0.jar
# ä¿®æ”¹ï¼š-Xmx1024M â†’ -Xmx1536Mï¼ˆå¦‚æœéœ€è¦ï¼‰

# 5. åˆ›å»ºmodsç›®å½•
sudo -u minecraft mkdir -p /opt/minecraft/mods

# 6. é¦–æ¬¡è¿è¡Œ
sudo -u minecraft java -Xmx1536M -Xms1536M -jar forge-1.20.1-47.1.0.jar nogui

# 7. æ¥å—EULA
sudo sed -i 's/eula=false/eula=true/' /opt/minecraft/eula.txt

# 8. é‡æ–°åŠ è½½å¹¶å¯åŠ¨
sudo systemctl daemon-reload
sudo systemctl start mc-server
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### 1. ç‰ˆæœ¬å…¼å®¹æ€§

- **ä¸–ç•Œæ–‡ä»¶å…¼å®¹æ€§**ï¼šæ–°ç‰ˆæœ¬å¯èƒ½ä¸å…¼å®¹æ—§ä¸–ç•Œ
- **å»ºè®®**ï¼šå¤‡ä»½ä¸–ç•Œæ–‡ä»¶ï¼Œæµ‹è¯•åå†å†³å®šæ˜¯å¦è¿ç§»

### 2. å†…å­˜éœ€æ±‚

- **åŸç‰ˆ**ï¼š1024MBé€šå¸¸è¶³å¤Ÿ
- **Forge**ï¼šå»ºè®®1536MB-2048MB
- **Fabric**ï¼šå»ºè®®1536MB-2048MB
- **å¤§å‹æ•´åˆåŒ…**ï¼šå¯èƒ½éœ€è¦2048MB+

### 3. æ€§èƒ½ä¼˜åŒ–

æ•´åˆåŒ…é€šå¸¸éœ€è¦ï¼š
- æ›´é«˜çš„å†…å­˜é…ç½®
- æ›´ä½çš„è§†è·ï¼ˆview-distanceï¼‰
- æ›´å°‘çš„æœ€å¤§ç©å®¶æ•°

### 4. å®¢æˆ·ç«¯ç‰ˆæœ¬

- å®¢æˆ·ç«¯ç‰ˆæœ¬å¿…é¡»ä¸æœåŠ¡å™¨ç‰ˆæœ¬åŒ¹é…
- Forgeå®¢æˆ·ç«¯éœ€è¦å®‰è£…ç›¸åŒç‰ˆæœ¬çš„Forge
- Fabricå®¢æˆ·ç«¯éœ€è¦å®‰è£…ç›¸åŒç‰ˆæœ¬çš„Fabric Loader

---

## ğŸ”„ å›æ»šåˆ°æ—§ç‰ˆæœ¬

å¦‚æœæ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå¯ä»¥å›æ»šï¼š

```bash
# 1. åœæ­¢æœåŠ¡å™¨
sudo systemctl stop mc-server

# 2. æ¢å¤å¤‡ä»½
sudo rm -rf /opt/minecraft/*
sudo tar -xzf /opt/minecraft-backup.tar.gz -C /

# 3. æ¢å¤systemdé…ç½®ï¼ˆå¦‚æœä¿®æ”¹è¿‡ï¼‰
sudo nano /etc/systemd/system/mc-server.service
# æ¢å¤åŸæ¥çš„é…ç½®

# 4. é‡æ–°åŠ è½½å¹¶å¯åŠ¨
sudo systemctl daemon-reload
sudo systemctl start mc-server
```

---

## ğŸ“‹ æ£€æŸ¥æ¸…å•

æ›´æ¢ç‰ˆæœ¬æˆ–æ·»åŠ æ•´åˆåŒ…å‰ï¼š

- [ ] å¤‡ä»½å½“å‰æœåŠ¡å™¨ï¼ˆåŒ…æ‹¬ä¸–ç•Œæ–‡ä»¶ï¼‰
- [ ] ç¡®å®šæ–°ç‰ˆæœ¬/æ•´åˆåŒ…çš„ä¸‹è½½é“¾æ¥
- [ ] æ£€æŸ¥ç³»ç»Ÿå†…å­˜æ˜¯å¦è¶³å¤Ÿ
- [ ] å‡†å¤‡ä¿®æ”¹systemdæœåŠ¡æ–‡ä»¶
- [ ] äº†è§£æ–°ç‰ˆæœ¬çš„é…ç½®è¦æ±‚
- [ ] å‡†å¤‡å®¢æˆ·ç«¯ç‰ˆæœ¬

æ›´æ¢åï¼š

- [ ] é¦–æ¬¡è¿è¡ŒæˆåŠŸ
- [ ] EULAå·²æ¥å—
- [ ] systemdæœåŠ¡é…ç½®æ­£ç¡®
- [ ] æœåŠ¡å™¨æ­£å¸¸å¯åŠ¨
- [ ] å®¢æˆ·ç«¯å¯ä»¥è¿æ¥
- [ ] æ€§èƒ½æ­£å¸¸ï¼ˆæ— å¡é¡¿ï¼‰

---

## ğŸ› ï¸ è‡ªåŠ¨åŒ–è„šæœ¬

å¯ä»¥åˆ›å»ºè‡ªåŠ¨åŒ–è„šæœ¬æ¥ç®€åŒ–æµç¨‹ï¼Œä½†å»ºè®®å…ˆæ‰‹åŠ¨æ“ä½œä¸€æ¬¡äº†è§£æµç¨‹ã€‚

---

## æ€»ç»“

**å¿…é¡»ä¿®æ”¹çš„åœ°æ–¹**ï¼š
1. âœ… `/opt/minecraft/server.jar`ï¼ˆæˆ–forge/fabric jarï¼‰
2. âœ… `/etc/systemd/system/mc-server.service`ï¼ˆjaræ–‡ä»¶åå’Œå¯èƒ½çš„å†…å­˜é…ç½®ï¼‰

**å¯èƒ½éœ€è¦ä¿®æ”¹**ï¼š
3. `/opt/minecraft/start.sh`ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
4. `/opt/minecraft/server.properties`ï¼ˆæ€§èƒ½å‚æ•°ï¼‰

**æ–°å¢å†…å®¹**ï¼š
5. `/opt/minecraft/mods/`ï¼ˆæ•´åˆåŒ…æ¨¡ç»„ï¼‰
6. `/opt/minecraft/config/`ï¼ˆæ•´åˆåŒ…é…ç½®ï¼‰

**é‡è¦**ï¼šæ¯æ¬¡æ›´æ¢å‰éƒ½è¦å¤‡ä»½ï¼

